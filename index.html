<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Lorem ipsum</title>
        <link rel="stylesheet" href="./index.css">
    </head>
    
    <body>

        <main>

            <form action="">
                <label for="todo">add todo</label>
                <input type="text" name="todo" id="todo">
                <button type="submit">send</button>
                <span></span>
            </form>

            <ul></ul>

        </main>

        <script src="./rookjs/rook.js"></script>

        <script>

            // todo script
            'form'.js()
                .on('submit' , e => {

                    e.stop() ;

                    if( e.this.elements['todo'].isValid ) {

                        const li = 'li'.node() ;
                        li.text = e.fields[0] ;
                        
                        'ul'.js().add( li , 'first' ) ;
                    }

                } )
                .constraints( field => ( // auto live events attach 2 field auto check constraints
                    field.name === 'todo' && field.value.trim().length > 2
                ) )
                .on( 'form'.js().liveEvent , e => {

                    if( e.field.isValid ) {

                        'btn'.js().disabled = false;
                        'sp'.js().text = 'valide' ;
                        
                    } else {
                        
                        'btn'.js().disabled = true;
                        'sp'.js().text = '3 caract√©res min' ;
                    }

                } )
            ;
            //todo script end
        
        </script>
    </body>

</html>